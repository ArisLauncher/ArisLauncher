"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function n(t,e){return function(){t.apply(e,arguments)}}function t(t){if("object"!=_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,n(o,this),n(i,this))}function r(n){var o=this;return null===this._state?void this._deferreds.push(n):void c(function(){var t=o._state?n.onFulfilled:n.onRejected;if(null!==t){var e;try{e=t(o._value)}catch(t){return void n.reject(t)}n.resolve(e)}else(o._state?n.resolve:n.reject)(o._value)})}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==(void 0===t?"undefined":_typeof(t))||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void u(n(e,t),n(o,this),n(i,this))}this._state=!0,this._value=t,f.call(this)}catch(t){i.call(this,t)}}function i(t){this._state=!1,this._value=t,f.call(this)}function f(){for(var t=0,e=this._deferreds.length;t<e;t++)r.call(this,this._deferreds[t]);this._deferreds=null}function u(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(t){if(o)return;o=!0,n(t)}}var e;e="object"==("undefined"==typeof window?"undefined":_typeof(window))&&window?window:global;var c=t.immediateFn||e.setImmediate||function(t){setTimeout(t,1)},l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.prototype.catch=function(t){return this.then(null,t)},t.prototype.then=function(n,o){var i=this;return new t(function(t,e){r.call(i,new function(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}(n,o,t,e))})},t.all=function(){var u=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new t(function(o,i){function r(e,t){try{if(t&&("object"==(void 0===t?"undefined":_typeof(t))||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){r(e,t)},i)}u[e]=t,0==--f&&o(u)}catch(t){i(t)}}if(0===u.length)return o([]);for(var f=u.length,t=0;t<u.length;t++)r(t,u[t])})},t.resolve=function(e){return e&&"object"==(void 0===e?"undefined":_typeof(e))&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(n){return new t(function(t,e){e(n)})},t.race=function(i){return new t(function(t,e){for(var n=0,o=i.length;n<o;n++)i[n].then(t,e)})},"undefined"!=typeof module&&module.exports?module.exports=t:e.Promise||(e.Promise=t)}();